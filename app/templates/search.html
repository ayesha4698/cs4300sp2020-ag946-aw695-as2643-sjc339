<!DOCTYPE html>
<html lang="en">

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">

    <link rel="stylesheet" href="/static/main.css">
    <script type="text/javascript" src="/static/scripts/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="/static/scripts/palettes.js"></script>
    <!-- <script type="text/javascript" src="/static/scripts/selectize.js"></script>
        <link rel="stylesheet" type="text/css" href="/static/selectize.css" /> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.13.3/js/standalone/selectize.min.js"
        integrity="sha512-pF+DNRwavWMukUv/LyzDyDMn8U2uvqYQdJN0Zvilr6DDo/56xPDZdDoyPDYZRSL4aOKO/FGKXTpzDyQJ8je8Qw=="
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.13.3/css/selectize.default.css"
        integrity="sha512-J0JTRxsBEJ99DP4GamwciDi8VjALSrZneBYrv98BhqHPvlQP6gLbmmuddlYXHDB8hyLtefOIJFlpZBhksCtK8g=="
        crossorigin="anonymous" />

    <title>Find My Palette</title>
    <link rel="shortcut icon" type="image/jpg" href="/static/images/palette.png" />
</head>

<body id="search-page">
    <div class="topcorner">
        <div class="p-1 d-flex flex-row-reverse">
            <a href="https://find-my-palette-v2.herokuapp.com">Version 2</a>
            <a href="https://find-my-palette.herokuapp.com">Version 1</a>
        </div>
        <p class="names">Created by: {{ netid }}</p>
    </div>

    <div id="form-container" class="mt-5 mb-5">
        <h1 class="mt-5 mb-2">Find My Palette</h1>
        <form id="search-form" class="box" action="" method="POST">
            <div class="form-group mb-4">
                <label>Keywords</label>
                <p class="subtext">What words do you associate with your brand/project? Select up to 5 keywords.</p>

                    <!-- <input id="tagsInput" type="text" name="keywords" value="hello [fskdf], slkdfjda - test"> -->
                <input id="tagsInput" type="text" name="keywords" value={% if keywords %}{% autoescape true %}{{
                    keywords|e }}{% endautoescape %}{% endif %}>
                <!-- <input id="keywordsInput" type="text" class="form-control" name="keywords" placeholder="keyword, keyword" value={% if keywords %}{{ keywords }}{% endif %}> -->
                <div id="suggestions"></div>
                {% if submit and "keywords1" in errors %}
                <p class="error">Please input at least one keyword.</p>
                {% elif submit and "keywords2" in errors %}
                <p class="error">Please input a maximum of 5 keywords.</p>
                {% elif submit and "keywords3" in errors %}
                <p class="error">Please remove invalid keywords.</p>
                {% endif %}
            </div>
            <input id="invalidWords" name="invalidWords" class="hidden">
            <input id="multiDefWords" name="multiDefs" class="hidden" type="text">

            <div class="form-group mb-4">
                <label>Brightness</label>
                <p class="subtext">Do you want your palettes to be darker (0) or brighter (10)?</p>
                <!-- <label for="customRange3" class="form-label">Example range</label> -->
                <input id="energyInput" name="energy" type="range" class="form-range" min="0" max="10" step="1" value={%
                    if energy %}{{ energy }}{% else %}{{ 5 }}{% endif %}>
                <!-- <input id="energyInput" type="number" name="energy" class="form-control" min=1 max=10 value={% if energy %}{{ energy }}{% endif %}> -->
                <ul id="energy-labels">
                    <li id="e0" class="e-label">0</li>
                    <li id="e1" class="e-label">1</li>
                    <li id="e2" class="e-label">2</li>
                    <li id="e3" class="e-label">3</li>
                    <li id="e4" class="e-label">4</li>
                    <li id="e5" class="e-label">5</li>
                    <li id="e6" class="e-label">6</li>
                    <li id="e7" class="e-label">7</li>
                    <li id="e8" class="e-label">8</li>
                    <li id="e9" class="e-label">9</li>
                    <li id="e10" class="e-label p-0">10</li>
                </ul>
            </div>

            <div class="form-group mb-4">
                <label>Necessary Colors</label>
                <p class="subtext">Choose up to 2 colors to include.</p>

                <p class="mb-0">HEX</p>
                <div class="input-group">
                    <span class="input-group-text">#</span>
                    <input id="color1Input" type="text" name="color1" class="form-control" value={% if color1 %}{{
                        color1 }}{% endif %}>
                </div>
                {% if submit and "color1" in errors %}
                <p class="error">Please select a valid HEX code.</p>
                {% endif %}

                <p class="mt-2 mb-0">HEX</p>
                <div class="input-group">
                    <span class="input-group-text">#</span>
                    <input id="color2Input" type="text" name="color2" class="form-control" value={% if color2 %}{{
                        color2 }}{% endif %}>
                </div>
                {% if submit and "color2" in errors %}
                <p class="error">Please select a valid HEX code.</p>
                {% endif %}
            </div>
            <input id="showdef" class="hidden" name="showdef" type="text">

            <!-- <div class="form-group mb-4">
                    <label>Number of Colors*</label>
                    <p class="subtext">How many colors do you want to include in the palette? Maximum is 6 colors.</p>
                    <input id="numColorInput" type="number" name="numcolors" class="form-control" min=2 max=6 value={% if numcolors %}{{ numcolors }}{% endif %}>
                    {% if submit and "numcolors" in errors %}
                        <p class="error">Please select a number between 2-6.</p>
                    {% endif %}
                </div> -->

            <div id="background" class="{{ 'hidden' if not showModal }}">
                <div id="defForm" class="box">
                    <div class="modal-top d-flex flex-row bg-white pt-4 pb-3 ps-5">
                        <h3>Select a definition for the following selected keyword(s):</h3>
                        <button id="closeBtn" type="button" class="btn-close" onclick="closeModal()"></button>
                    </div>
                    <div id="options" class="mt-5"></div>
                    <div class="modal-bottom d-flex flex-row-reverse">
                        {% if submit and "multi" in errors %}
                        <p class="error">Please select a definition for every keyword.</p>
                        {% endif %}
                        <button type="submit" class="btn btn-primary mt-1" id="defBtn">Finish</button>
                    </div>
                </div>
            </div>

            <div class="d-flex flex-row-reverse">
                <button type="submit" class="btn btn-primary" id="submitBtn">Generate</button>
            </div>
        </form>
    </div>

    {% if results %}
    <div id="results" class="mt-5 mb-5 ms-5">
        <h1>Results</h1>
        {% for palette in results %}
        <h2>Palette</h2>
        <div class="palette d-flex flex-row justify-between">
            {% for color in palette %}
            <div class="color">
                <div class="swatch"></div>
                <p>#{{ color }}</p>
            </div>

            {% endfor %}
        </div>
        <div> <h6>Palette Score: {{scored[loop.index0][1]}}</h2></div>
            <div>
                {% for breakdown in keywordBreakdown[loop.index0]%}
                <h6>Keyword Breakdown: ( {{breakdown[0]}} :  {{breakdown[1]}} %) </h2>
                {% endfor %}
            </div>
        {% endfor %}

    </div>
    {% elif results == [] %}
    <div class="mt-5 mb-5 ms-5">
        <h2>No results found for keyword(s): {{ keywords }}.</h2>
        <p>Try different keywords e.g. earthy, contemporary, elegant.</p>
    </div>
    {% endif %}
</body>

</html>
